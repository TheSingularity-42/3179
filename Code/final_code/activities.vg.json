{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",


        "data": {
        "url": "https://raw.githubusercontent.com/TheSingularity-42/3179/main/VegaLite/Assignment2Data/SharkAttacks.csv"
       },
       "autosize" :{
        "type": "pad",
        "contains": "content"
    },
    "config": {
        "font": "Raleway",
        "title": {
            "fontSize" : 28,  
            "font" : "Quicksand",
            "color" : "#003d30"
        },
        "axis": {
            "titleFontSize" : 24,
            "titleFont" : "Quicksand", 
            "titleColor" : "#004d40",
            "labelFontSize" :18,
            "labelFontWeight": 600,
            "labelFont" : "Raleway",
            "labelColor" : "#00796b"
        },
        "view": {
            "stroke" : "transparent",
            "discreteWidth": {"step": 10}
            
        },
        "legend": {
            "titleFontSize": 24,
            "titleColor" : "#003d30",
            "labelFontSize" : 16,
            "titleFont" : "Quicksand",
            "labelFont": "Raleway",
            "labelColor" : "#004d40"
        },
        "text": {
            "fontSize" : 18,
            "font": "QuickSand",
            "color" :"#004d40"
        }
    
    },
       "title" : "Common Activities vs Attacks",
       "width": 400,
       "height" : 450,
       "transform": [
        {"aggregate": [{"op": "count","as": "actCount"}], "groupby": ["month", "activity"]},
        {"window": [{"op":"max", "field": "actCount", "as": "maxCount"}]}
       ],
       "background" : null,
       "layer": [{
        "mark":"line",
        "encoding": {
            "x" : {
                "title" : "Month",  
                "field" : "month",
                "type" : "ordinal",
                "sort" : "ascending",
                "timeUnit" : "month",
                "axis":{
                    "labelAngle" :45
                }
            },
            "y" : {
                "title" : "Number Of Attacks",
                "field" : "actCount",
                "type": "quantitative"
            },
            "color": {
                "field" : "activity",
                "type": "nominal",
                    "scale" : {
                        "domain": ["boarding", "diving", "swimming", "fishing"]
                    },
                    "legend" :{
                        "title" : "Activity",
                        "labelExpr": "datum.value === 'boarding' ? 'Boarding' : datum.value === 'diving' ? 'Diving' : datum.value === 'swimming' ? 'Swimming' : datum.value ===  'fishing' ? 'Fishing' : 'Other'",
                        "symbolStrokeWidth" : 15
                    }
            },
            "tooltip" : [
                {"field": "activity", "type": "nominal", "title": "Activity"},
                {"field": "month", "type": "temporal", "timeUnit" : "month", "title" : "Month"},
                {"field": "actCount", "type": "quantitative","title": "Attacks"}
            ]
        }
       },
       {
        "mark" : {
         "type":   "text",
         "dx" : 200
        },
        "transform": [
            {"calculate": "datum.activity+', '+datum.actCount+' attacks'", "as": "newText"},
            {"filter": "datum.actCount === datum.maxCount"}
        ],
        "encoding":{
                "x" : {
                    "field" : "month",
                    "type": "ordinal",
                    "sort" : "ascending",
                    "timeUnit" : "month"
                
                },
                "y" : {
                    "field" : "actCount",
                    "type": "quantitative",
                    "aggregate" : "max"
                },
                "text" : {
                    "field": "newText",
                    "type": "nominal"
                }
                
            }
       }
       ]
}